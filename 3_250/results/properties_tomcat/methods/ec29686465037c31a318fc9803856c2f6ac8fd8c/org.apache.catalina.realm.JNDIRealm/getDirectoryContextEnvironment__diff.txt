/**                                                                                                    /**                                                                                                 
* Create our directory context configuration.                                                          * Create our directory context configuration.                                                       
*                                                                                                      *                                                                                                   
* @return java.util.Hashtable the configuration for the directory context.                             * @return java.util.Hashtable the configuration for the directory context.                          
*/                                                                                                     */                                                                                                  
protected Hashtable&lt;String, String&gt; getDirectoryContextEnvironment() {                           protected Hashtable&lt;String, String&gt; getDirectoryContextEnvironment() {                        
Hashtable&lt;String, String&gt; env = new Hashtable&lt;&gt;();                                         Hashtable&lt;String, String&gt; env = new Hashtable&lt;&gt;();                                      
// Configure our directory context environment.                                                        // Configure our directory context environment.                                                     
if (containerLog.isDebugEnabled() && connectionAttempt == 0)                                         | if (containerLog.isDebugEnabled() && connectionAttempt == 0) {                                      
containerLog.debug("Connecting to URL " + connectionURL);                                              containerLog.debug("Connecting to URL " + connectionURL);                                           
else if (containerLog.isDebugEnabled() && connectionAttempt &gt; 0)                                  | } else if (containerLog.isDebugEnabled() && connectionAttempt &gt; 0) {                             
containerLog.debug("Connecting to URL " + alternateURL);                                               containerLog.debug("Connecting to URL " + alternateURL);                                            
                                                                                                     | }                                                                                                   
env.put(Context.INITIAL_CONTEXT_FACTORY, contextFactory);                                              env.put(Context.INITIAL_CONTEXT_FACTORY, contextFactory);                                           
if (connectionName != null)                                                                          | if (connectionName != null) {                                                                       
env.put(Context.SECURITY_PRINCIPAL, connectionName);                                                   env.put(Context.SECURITY_PRINCIPAL, connectionName);                                                
if (connectionPassword != null)                                                                      | }                                                                                                   
                                                                                                     | if (connectionPassword != null) {                                                                   
env.put(Context.SECURITY_CREDENTIALS, connectionPassword);                                             env.put(Context.SECURITY_CREDENTIALS, connectionPassword);                                          
if (connectionURL != null && connectionAttempt == 0)                                                 | }                                                                                                   
                                                                                                     | if (connectionURL != null && connectionAttempt == 0) {                                              
env.put(Context.PROVIDER_URL, connectionURL);                                                          env.put(Context.PROVIDER_URL, connectionURL);                                                       
else if (alternateURL != null && connectionAttempt &gt; 0)                                           | } else if (alternateURL != null && connectionAttempt &gt; 0) {                                      
env.put(Context.PROVIDER_URL, alternateURL);                                                           env.put(Context.PROVIDER_URL, alternateURL);                                                        
if (authentication != null)                                                                          | }                                                                                                   
                                                                                                     | if (authentication != null) {                                                                       
env.put(Context.SECURITY_AUTHENTICATION, authentication);                                              env.put(Context.SECURITY_AUTHENTICATION, authentication);                                           
if (protocol != null)                                                                                | }                                                                                                   
                                                                                                     | if (protocol != null) {                                                                             
env.put(Context.SECURITY_PROTOCOL, protocol);                                                          env.put(Context.SECURITY_PROTOCOL, protocol);                                                       
if (referrals != null)                                                                               | }                                                                                                   
                                                                                                     | if (referrals != null) {                                                                            
env.put(Context.REFERRAL, referrals);                                                                  env.put(Context.REFERRAL, referrals);                                                               
if (derefAliases != null)                                                                            | }                                                                                                   
                                                                                                     | if (derefAliases != null) {                                                                         
env.put(JNDIRealm.DEREF_ALIASES, derefAliases);                                                        env.put(JNDIRealm.DEREF_ALIASES, derefAliases);                                                     
if (connectionTimeout != null)                                                                       | }                                                                                                   
                                                                                                     | if (connectionTimeout != null) {                                                                    
env.put("com.sun.jndi.ldap.connect.timeout", connectionTimeout);                                       env.put("com.sun.jndi.ldap.connect.timeout", connectionTimeout);                                    
if (readTimeout != null)                                                                             | }                                                                                                   
                                                                                                     | if (readTimeout != null) {                                                                          
env.put("com.sun.jndi.ldap.read.timeout", readTimeout);                                                env.put("com.sun.jndi.ldap.read.timeout", readTimeout);                                             
                                                                                                     | }                                                                                                   
return env;                                                                                            return env;                                                                                         
}                                                                                                      }                                                                                                   
