/**                                                                                                    /**                                                                                                 
* Utility method to enable sub-classes to easily register additional                                   * Utility method to enable sub-classes to easily register additional                                
* components that don't implement {@link JmxEnabled} with an MBean server.                             * components that don't implement {@link JmxEnabled} with an MBean server.                          
* &lt;br&gt;                                                                                           * &lt;br&gt;                                                                                        
* Note: This method should only be used once {@link #initInternal()} has                               * Note: This method should only be used once {@link #initInternal()} has                            
* been called and before {@link #destroyInternal()} has been called.                                   * been called and before {@link #destroyInternal()} has been called.                                
*                                                                                                      *                                                                                                   
* @param obj                       The object the register                                             * @param obj                       The object the register                                          
* @param objectNameKeyProperties   The key properties component of the                                 * @param objectNameKeyProperties   The key properties component of the                              
*                                  object name to use to register the                                  *                                  object name to use to register the                               
*                                  object                                                              *                                  object                                                           
*                                                                                                      *                                                                                                   
* @return  The name used to register the object                                                        * @return  The name used to register the object                                                     
*/                                                                                                     */                                                                                                  
protected final ObjectName register(Object obj, String objectNameKeyProperties) {                      protected final ObjectName register(Object obj, String objectNameKeyProperties) {                   
// Construct an object name with the right domain                                                      // Construct an object name with the right domain                                                   
StringBuilder name = new StringBuilder(getDomain());                                                   StringBuilder name = new StringBuilder(getDomain());                                                
name.append(':');                                                                                      name.append(':');                                                                                   
name.append(objectNameKeyProperties);                                                                  name.append(objectNameKeyProperties);                                                               
ObjectName on = null;                                                                                  ObjectName on = null;                                                                               
try {                                                                                                  try {                                                                                               
on = new ObjectName(name.toString());                                                                  on = new ObjectName(name.toString());                                                               
Registry.getRegistry(null, null).registerComponent(obj, on, null);                                     Registry.getRegistry(null, null).registerComponent(obj, on, null);                                  
} catch (MalformedObjectNameException e) {                                                           |                                                                                                     
log.warn(sm.getString("lifecycleMBeanBase.registerFail", obj, name), e);                             |                                                                                                     
} catch (Exception e) {                                                                                } catch (Exception e) {                                                                             
log.warn(sm.getString("lifecycleMBeanBase.registerFail", obj, name), e);                               log.warn(sm.getString("lifecycleMBeanBase.registerFail", obj, name), e);                            
}                                                                                                      }                                                                                                   
return on;                                                                                             return on;                                                                                          
}                                                                                                      }                                                                                                   
