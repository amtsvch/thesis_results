// -------------------- Static methods --------------------                                            // -------------------- Static methods --------------------                                         
// Factories                                                                                           // Factories                                                                                        
/**                                                                                                    /**                                                                                                 
* Factory method to create (if necessary) and return our                                               * Factory method to create (if necessary) and return our                                            
* &lt;code&gt;Registry&lt;/code&gt; instance.                                                          * &lt;code&gt;Registry&lt;/code&gt; instance.                                                       
*                                                                                                      *                                                                                                   
* @param key Unused                                                                                    * @param key Unused                                                                                 
* @param guard Prevent access to the registry by untrusted components                                  * @param guard Prevent access to the registry by untrusted components                               
*                                                                                                      *                                                                                                   
* @return the registry                                                                                 * @return the registry                                                                              
* @since 1.1                                                                                           * @since 1.1                                                                                        
*/                                                                                                     */                                                                                                  
public static synchronized Registry getRegistry(Object key, Object guard) {                            public static synchronized Registry getRegistry(Object key, Object guard) {                         
if (registry == null) {                                                                                if (registry == null) {                                                                             
if (JreCompat.isGraalAvailable()) {                                                                  |                                                                                                     
disableRegistry();                                                                                   |                                                                                                     
} else {                                                                                             |                                                                                                     
registry = new Registry();                                                                             registry = new Registry();                                                                          
}                                                                                                    |                                                                                                     
registry.guard = guard;                                                                                registry.guard = guard;                                                                             
}                                                                                                      }                                                                                                   
if (registry.guard != null && registry.guard != guard) {                                               if (registry.guard != null && registry.guard != guard) {                                            
return null;                                                                                           return null;                                                                                        
}                                                                                                      }                                                                                                   
return registry;                                                                                       return registry;                                                                                    
}                                                                                                      }                                                                                                   
