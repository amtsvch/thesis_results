private boolean buildClassPath(StringBuilder classpath, ClassLoader loader) {                          private boolean buildClassPath(StringBuilder classpath, ClassLoader loader) {                       
if (loader instanceof URLClassLoader) {                                                                if (loader instanceof URLClassLoader) {                                                             
URL[] repositories = ((URLClassLoader) loader).getURLs();                                              URL[] repositories = ((URLClassLoader) loader).getURLs();                                           
for (URL url : repositories) {                                                                         for (URL url : repositories) {                                                                      
String repository = url.toString();                                                                    String repository = url.toString();                                                                 
if (repository.startsWith("file://"))                                                                | if (repository.startsWith("file://")) {                                                             
repository = UDecoder.URLDecode(repository.substring(7), StandardCharsets.UTF_8);                      repository = UDecoder.URLDecode(repository.substring(7), StandardCharsets.UTF_8);                   
else if (repository.startsWith("file:"))                                                             | } else if (repository.startsWith("file:")) {                                                        
repository = UDecoder.URLDecode(repository.substring(5), StandardCharsets.UTF_8);                      repository = UDecoder.URLDecode(repository.substring(5), StandardCharsets.UTF_8);                   
else                                                                                                 | } else {                                                                                            
continue;                                                                                              continue;                                                                                           
if (repository == null)                                                                              | }                                                                                                   
                                                                                                     | if (repository == null) {                                                                           
continue;                                                                                              continue;                                                                                           
if (classpath.length() &gt; 0)                                                                       | }                                                                                                   
                                                                                                     | if (classpath.length() &gt; 0) {                                                                    
classpath.append(File.pathSeparator);                                                                  classpath.append(File.pathSeparator);                                                               
                                                                                                     | }                                                                                                   
classpath.append(repository);                                                                          classpath.append(repository);                                                                       
}                                                                                                      }                                                                                                   
} else if (loader == ClassLoader.getSystemClassLoader()) {                                             } else if (loader == ClassLoader.getSystemClassLoader()) {                                          
// Java 9 onwards. The internal class loaders no longer extend                                         // Java 9 onwards. The internal class loaders no longer extend                                      
// URLCLassLoader                                                                                      // URLCLassLoader                                                                                   
String cp = System.getProperty("java.class.path");                                                     String cp = System.getProperty("java.class.path");                                                  
if (cp != null && cp.length() &gt; 0) {                                                                if (cp != null && cp.length() &gt; 0) {                                                             
if (classpath.length() &gt; 0) {                                                                       if (classpath.length() &gt; 0) {                                                                    
classpath.append(File.pathSeparator);                                                                  classpath.append(File.pathSeparator);                                                               
}                                                                                                      }                                                                                                   
classpath.append(cp);                                                                                  classpath.append(cp);                                                                               
}                                                                                                      }                                                                                                   
return false;                                                                                          return false;                                                                                       
} else {                                                                                               } else {                                                                                            
// Ignore Graal "unknown" classloader                                                                  // Ignore Graal "unknown" classloader                                                               
if (!JreCompat.isGraalAvailable()) {                                                                   if (!JreCompat.isGraalAvailable()) {                                                                
log.info(sm.getString("webappLoader.unknownClassLoader", loader, loader.getClass()));                  log.info(sm.getString("webappLoader.unknownClassLoader", loader, loader.getClass()));               
}                                                                                                      }                                                                                                   
return false;                                                                                          return false;                                                                                       
}                                                                                                      }                                                                                                   
return true;                                                                                           return true;                                                                                        
}                                                                                                      }                                                                                                   
