protected void setupSocket() throws IOException {                                                      protected void setupSocket() throws IOException {                                                   
if (mcastBindAddress != null) {                                                                        if (mcastBindAddress != null) {                                                                     
try {                                                                                                  try {                                                                                               
log.info(sm.getString("mcastServiceImpl.bind", address, Integer.toString(port)));                      log.info(sm.getString("mcastServiceImpl.bind", address, Integer.toString(port)));                   
socket = new MulticastSocket(new InetSocketAddress(address, port));                                    socket = new MulticastSocket(new InetSocketAddress(address, port));                                 
} catch (BindException e) {                                                                            } catch (BindException e) {                                                                         
/*                                                                                                     /*                                                                                                  
* On some platforms (e.g. Linux) it is not possible to bind                                            * On some platforms (e.g. Linux) it is not possible to bind                                         
* to the multicast address. In this case only bind to the                                              * to the multicast address. In this case only bind to the                                           
* port.                                                                                                * port.                                                                                             
*/                                                                                                     */                                                                                                  
log.info(sm.getString("mcastServiceImpl.bind.failed"));                                                log.info(sm.getString("mcastServiceImpl.bind.failed"));                                             
socket = new MulticastSocket(port);                                                                    socket = new MulticastSocket(port);                                                                 
}                                                                                                      }                                                                                                   
} else {                                                                                               } else {                                                                                            
socket = new MulticastSocket(port);                                                                    socket = new MulticastSocket(port);                                                                 
}                                                                                                      }                                                                                                   
// hint if we want disable loop back(local machine) messages                                           // hint if we want disable loop back(local machine) messages                                        
socket.setLoopbackMode(localLoopbackDisabled);                                                         socket.setLoopbackMode(localLoopbackDisabled);                                                      
if (mcastBindAddress != null) {                                                                        if (mcastBindAddress != null) {                                                                     
if (log.isInfoEnabled())                                                                             | if (log.isInfoEnabled()) {                                                                          
log.info(sm.getString("mcastServiceImpl.setInterface", mcastBindAddress));                             log.info(sm.getString("mcastServiceImpl.setInterface", mcastBindAddress));                          
                                                                                                     | }                                                                                                   
socket.setInterface(mcastBindAddress);                                                                 socket.setInterface(mcastBindAddress);                                                              
}                                                                                                      }                                                                                                   
// end if                                                                                              // end if                                                                                           
// force a so timeout so that we don't block forever                                                   // force a so timeout so that we don't block forever                                                
if (mcastSoTimeout &lt;= 0)                                                                          | if (mcastSoTimeout &lt;= 0) {                                                                       
mcastSoTimeout = (int) sendFrequency;                                                                  mcastSoTimeout = (int) sendFrequency;                                                               
                                                                                                     | }                                                                                                   
if (log.isInfoEnabled()) {                                                                             if (log.isInfoEnabled()) {                                                                          
log.info(sm.getString("mcastServiceImpl.setSoTimeout", Integer.toString(mcastSoTimeout)));             log.info(sm.getString("mcastServiceImpl.setSoTimeout", Integer.toString(mcastSoTimeout)));          
}                                                                                                      }                                                                                                   
socket.setSoTimeout(mcastSoTimeout);                                                                   socket.setSoTimeout(mcastSoTimeout);                                                                
if (mcastTTL &gt;= 0) {                                                                                if (mcastTTL &gt;= 0) {                                                                             
if (log.isInfoEnabled())                                                                             | if (log.isInfoEnabled()) {                                                                          
log.info(sm.getString("mcastServiceImpl.setTTL", Integer.toString(mcastTTL)));                         log.info(sm.getString("mcastServiceImpl.setTTL", Integer.toString(mcastTTL)));                      
                                                                                                     | }                                                                                                   
socket.setTimeToLive(mcastTTL);                                                                        socket.setTimeToLive(mcastTTL);                                                                     
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
