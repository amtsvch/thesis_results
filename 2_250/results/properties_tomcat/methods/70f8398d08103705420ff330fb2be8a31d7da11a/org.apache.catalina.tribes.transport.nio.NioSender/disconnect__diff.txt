/**                                                                                                    /**                                                                                                 
* disconnect                                                                                           * disconnect                                                                                        
*                                                                                                      *                                                                                                   
* TODO Implement this org.apache.catalina.tribes.transport.IDataSender method                          * TODO Implement this org.apache.catalina.tribes.transport.IDataSender method                       
*/                                                                                                     */                                                                                                  
@Override                                                                                              @Override                                                                                           
public void disconnect() {                                                                             public void disconnect() {                                                                          
try {                                                                                                  try {                                                                                               
connecting = false;                                                                                    connecting = false;                                                                                 
setConnected(false);                                                                                   setConnected(false);                                                                                
if (socketChannel != null) {                                                                           if (socketChannel != null) {                                                                        
try {                                                                                                  try {                                                                                               
try {                                                                                                  try {                                                                                               
socketChannel.socket().close();                                                                        socketChannel.socket().close();                                                                     
} catch (Exception x) {                                                                                } catch (Exception x) {                                                                             
// Ignore                                                                                              // Ignore                                                                                           
}                                                                                                      }                                                                                                   
// error free close, all the way                                                                       // error free close, all the way                                                                    
// try {socket.shutdownOutput();}catch ( Exception x){}                                                // try {socket.shutdownOutput();}catch ( Exception x){}                                             
// try {socket.shutdownInput();}catch ( Exception x){}                                                 // try {socket.shutdownInput();}catch ( Exception x){}                                              
// try {socket.close();}catch ( Exception x){}                                                         // try {socket.close();}catch ( Exception x){}                                                      
try {                                                                                                  try {                                                                                               
socketChannel.close();                                                                                 socketChannel.close();                                                                              
} catch (Exception x) {                                                                                } catch (Exception x) {                                                                             
// Ignore                                                                                              // Ignore                                                                                           
}                                                                                                      }                                                                                                   
} finally {                                                                                            } finally {                                                                                         
socketChannel = null;                                                                                  socketChannel = null;                                                                               
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
if (dataChannel != null) {                                                                             if (dataChannel != null) {                                                                          
try {                                                                                                  try {                                                                                               
try {                                                                                                  try {                                                                                               
dataChannel.socket().close();                                                                          dataChannel.socket().close();                                                                       
} catch (Exception x) {                                                                                } catch (Exception x) {                                                                             
// Ignore                                                                                              // Ignore                                                                                           
}                                                                                                      }                                                                                                   
// error free close, all the way                                                                       // error free close, all the way                                                                    
// try {socket.shutdownOutput();}catch ( Exception x){}                                                // try {socket.shutdownOutput();}catch ( Exception x){}                                             
// try {socket.shutdownInput();}catch ( Exception x){}                                                 // try {socket.shutdownInput();}catch ( Exception x){}                                              
// try {socket.close();}catch ( Exception x){}                                                         // try {socket.close();}catch ( Exception x){}                                                      
try {                                                                                                  try {                                                                                               
dataChannel.close();                                                                                   dataChannel.close();                                                                                
} catch (Exception x) {                                                                                } catch (Exception x) {                                                                             
// Ignore                                                                                              // Ignore                                                                                           
}                                                                                                      }                                                                                                   
} finally {                                                                                            } finally {                                                                                         
dataChannel = null;                                                                                    dataChannel = null;                                                                                 
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
} catch (Exception x) {                                                                                } catch (Exception x) {                                                                             
log.error(sm.getString("nioSender.unable.disconnect", x.getMessage()));                                log.error(sm.getString("nioSender.unable.disconnect", x.getMessage()));                             
if (log.isDebugEnabled())                                                                            | if (log.isDebugEnabled()) {                                                                         
log.debug(sm.getString("nioSender.unable.disconnect", x.getMessage()), x);                             log.debug(sm.getString("nioSender.unable.disconnect", x.getMessage()), x);                          
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
                                                                                                     | }                                                                                                   
